[Unit]
Description=Dhan Dashboard
After=graphical.target

[Service]
Type=simple
User=yogesh
Group=yogesh
WorkingDirectory=/home/yogesh/Dhan/dhan-main

# Add small delay for stability
ExecStartPre=/bin/sleep 1

# Basic environment setup
Environment="DISPLAY=:0"
Environment="XDG_RUNTIME_DIR=/run/user/1000"
Environment="QT_QPA_PLATFORM=linuxfb:fb=/dev/fb0"
Environment="QT_QPA_EVDEV_TOUCHSCREEN_PARAMETERS=rotate=90"
Environment="QT_QPA_FB_ROTATION=90"
Environment="HOME=/home/yogesh"

ExecStart=/usr/bin/python3 /home/yogesh/Dhan/dhan-main/dashboard.py

# Basic recovery
Restart=always
RestartSec=3s

# Logging
StandardOutput=append:/var/log/dashboard.log
StandardError=append:/var/log/dashboard-error.log

[Install]
WantedBy=multi-user.target